---
epic: 2
story: 1
title: "Reel View Foundation & UI"
status: "Draft"
---

### Story Statement

As a user, I want to enter a full-screen, vertical-scrolling view when I tap on a dish, so I can browse the menu in an immersive, focused way.

### Acceptance Criteria

1.  A full-screen `ReelView` component is created that overlays the main page when active.
2.  The component's background has a "glassmorphic" effect (e.g., a blurred version of the underlying page).
3.  The view can be dismissed via a close button, returning the user to the main profile page.
4.  The component renders a vertical list of dishes.
5.  Dishes with `instock` status of `no` are rendered with a greyed-out effect and are placed at the very end of the list.
6.  The `GlobalCart` component (from Story 1.7) is visible in the top-left corner.

### Dev Notes

#### Technical Specifications

*   **Component:** `ReelView`. This will be a stateful component that is conditionally rendered over the main page. [Source: `docs/architecture.md#Section-6`]
*   **State Management:** A global Zustand store (e.g., `use-ui.store.ts`) should be used to manage the active state of the Reel View and which dish it should initially display. [Source: `docs/ui-architecture.md#Section-5`]
*   **Styling:** The component should use `position: fixed` to overlay the entire viewport. The "glassmorphic" effect can be achieved using Tailwind CSS's `backdrop-blur` utility. [Source: `docs/prd.md#Story-2.1`]
*   **Data Logic:** The component will receive the full list of dishes and must contain logic to sort them, pushing any with `instock: 'no'` to the end of the array before rendering.

#### File Locations

*   **Component:** `apps/client/src/components/features/reel/ReelView.tsx` (inferred)
*   **State Store:** `apps/client/src/store/use-ui.store.ts` (new)

### Tasks / Subtasks

1.  **(AC: 1)** Create the `ReelView.tsx` component file.
2.  **State:** Create a new `use-ui.store.ts` Zustand store to manage the visibility of the Reel View.
3.  **(AC: 1)** In the main page layout, conditionally render the `ReelView` based on the state from the UI store.
4.  **(AC: 2)** Style the `ReelView` container to be a full-screen fixed overlay with a backdrop blur effect.
5.  **(AC: 3)** Add a close button to the UI that, when clicked, updates the UI store to hide the `ReelView`.
6.  **(AC: 4, 5)** Implement the rendering logic. Take the `dishes` prop, sort it to move `instock: 'no'` items to the end, and then map over the sorted array to render placeholder content for each dish.
7.  **(AC: 6)** Ensure the `GlobalCart` component is included in the `ReelView` layout.
8.  **Test (Integration):** Write tests to verify:
    *   The `ReelView` is not visible by default.
    *   It becomes visible when the global state is updated.
    *   Dishes are sorted correctly based on `instock` status.

---

### Tasks / Subtasks (Idempotent)

- [x] **(AC: 1)** Create the `ReelView.tsx` component file.
- [x] **State:** Create a new `use-ui.store.ts` Zustand store.
- [x] **(AC: 1)** In the main page layout, conditionally render the `ReelView`.
- [x] **(AC: 2)** Style the `ReelView` container as a full-screen overlay with a backdrop blur.
- [x] **(AC: 3)** Add a close button that updates the UI store.
- [x] **(AC: 4, 5)** Implement the logic to sort dishes by `instock` status.
- [x] **(AC: 6)** Ensure the `GlobalCart` is visible in the `ReelView`.
- [x] **Test (Integration):** Write and pass all tests to verify the component's rendering and state integration.
- [x] **Finalize:** Mark the story as complete.

### Dev Agent Record

**Completion Notes:**

*   **Implementation:** Created the `ReelView` component in `apps/client/src/components/features/reel/reel-view.tsx`.
*   **State Management:** Implemented a new `useUIStore` in `apps/client/src/store/use-ui.store.ts` to manage the visibility of the Reel View. The main vendor page now conditionally renders the `ReelView` based on this store.
*   **UI/UX:** The `ReelView` is a full-screen overlay with a `backdrop-blur` effect. It includes a close button and correctly renders the `GlobalCart` component. The view is animated using `framer-motion` for a smooth fade-in/out transition.
*   **Data Logic:** The component correctly takes a list of dishes, sorts them to place any with an `instock` status of `'no'` at the end of the list, and then renders them in a vertically scrollable container.
*   **Testing:** Developed a test suite in `src/__tests__/components/features/reel/reel-view.test.tsx` that verifies the component's conditional rendering, data sorting, and dismissal logic. All tests are passing.

**File List:**

*   `apps/client/src/store/use-ui.store.ts` (created)
*   `apps/client/src/components/features/reel/reel-view.tsx` (created)
*   `apps/client/src/app/[vendor_slug]/page.tsx` (modified)
*   `docs/qa/assessments/2.1-test-reel-view.md` (created)
*   `apps/client/src/__tests__/components/features/reel/reel-view.test.tsx` (created)
*   `docs/stories/2.1.story.md` (modified)

**Change Log:**

*   feat(2.1): create reel view foundation
*   test(2.1): add tests for reel view component
