---
epic: 2
story: 5
title: "Core Ordering Interaction (v2 - Simplified)"
status: "Draft"
---

### Story Statement

As a user, I want to be able to easily add items to my cart from the Reel View, so I can build my order while I browse.

### Acceptance Criteria

1.  Double-tapping the center media display adds the current dish to the cart. This does not remove items.
2.  A confirmation micro-animation (e.g., a plus icon) appears over the media on successful addition.
3.  A dedicated "Add to Cart" button is present in the `ReelActionBar`. It acts as a toggle: tapping it adds the item, and tapping it again removes it. The button's visual state updates with micro-animations.
4.  The number badge on the `GlobalCart` component updates in real-time as items are added or removed.

### Dev Notes

#### Technical Specifications

*   **State Management:** All interactions in this story will call action methods on the global `useCartStore` (e.g., `addItem`, `removeItem`). [Source: `docs/ui-architecture.md#Section-5`]
*   **Interaction:**
    *   The double-tap functionality will be added to the `MediaDisplay` component (from Story 2.2).
    *   The "Add to Cart" button will be added to the `ReelActionBar` component (from Story 2.4).
*   **UI Feedback:** The `GlobalCart` component (Story 1.7) must be subscribed to the cart store to show the live item count. A simple animation (e.g., using `framer-motion`) should be triggered for the confirmation effect.

#### File Locations

*   This story will modify:
    *   `apps/client/src/components/features/reel/MediaDisplay.tsx`
    *   `apps/client/src/components/features/reel/ReelActionBar.tsx`
    *   `apps/client/src/store/use-cart.store.ts`

### Tasks / Subtasks

1.  **(AC: 1)** In `MediaDisplay.tsx`, add an `onDoubleClick` event handler that calls the `addItem` action on the `useCartStore`.
2.  **(AC: 2)** Implement a simple, short-lived animation (e.g., a fading/scaling plus icon) that appears over the media when the double-tap event is fired.
3.  **(AC: 3)** In `ReelActionBar.tsx`, add a new "Add to Cart" button. This button's state (e.g., added or not) should be derived by checking if the current dish exists in the cart store.
4.  **(AC: 3)** The `onClick` handler for this button should check if the item is in the cart. If not, it calls `addItem`. If it is, it calls `removeItem`.
5.  **(AC: 4)** Verify that the `GlobalCart` component, which is already subscribed to the cart store, updates its badge count correctly when these actions are performed.
6.  **Test (Integration):** Write tests to verify:
    *   Double-tapping `MediaDisplay` calls `cartStore.addItem`.
    *   Clicking the "Add to Cart" button correctly calls either `addItem` or `removeItem`.
    *   The `GlobalCart` badge count reflects the changes in the cart store.
