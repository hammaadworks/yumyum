---
epic: 2
story: 2
title: "Center Media Display"
status: "Draft"
---

### Story Statement

As a user browsing the Reel View, I want to see a large, clear image or video of the dish, so I can have a visually appealing experience.

### Acceptance Criteria

1.  A `MediaDisplay` component is created that takes a single dish object as a prop.
2.  If the dish object contains a `reel` URL, the component must render a video player that loops the video automatically.
3.  The dish's `image` URL must be used as the video's `poster`â€”a static image shown while the video is loading.
4.  If the dish object does **not** contain a `reel` URL, the component must render the static `image` instead.
5.  The media should fill the available center space of the Reel View, maintaining its aspect ratio.

### Dev Notes

#### Technical Specifications

*   **Component:** `MediaDisplay`. This component is responsible for the primary visual content within each slide of the `ReelView`.
*   **Conditional Rendering:** The core of this component is a conditional check on the `dish.reel` property to determine whether to render an `<video>` or an `<img>` element.
*   **Video Player:** The `<video>` element should have the `autoPlay`, `loop`, `muted`, and `playsInline` attributes to ensure a seamless, Instagram-like experience.
*   **Styling:** Use Tailwind CSS to ensure the media is centered and scales correctly while maintaining its aspect ratio (e.g., using `object-contain` or `object-cover`).

#### File Locations

*   **Component:** `apps/client/src/components/features/reel/MediaDisplay.tsx` (inferred)

### Tasks / Subtasks

1.  **(AC: 1)** Create the `MediaDisplay.tsx` component file. It should accept a `dish: Dish` prop.
2.  **(AC: 2, 4)** Implement the conditional rendering logic based on the presence of `dish.reel`.
3.  **(AC: 2)** If rendering a video, ensure the `src` is set to the `reel` URL and include the necessary attributes (`autoPlay`, `loop`, `muted`, `playsInline`).
4.  **(AC: 3)** For the video element, set the `poster` attribute to the `dish.image` URL.
5.  **(AC: 4)** If rendering an image, ensure the `src` is set to the `dish.image` URL.
6.  **(AC: 5)** Apply CSS classes to the media element to ensure it is centered and sized appropriately within its container.
7.  **Test (Integration):** Write tests to verify:
    *   An `<img>` tag is rendered when `reel` is not provided.
    *   A `<video>` tag is rendered when `reel` is provided.
    *   The `<video>` tag has the correct `poster` attribute.

---

### Tasks / Subtasks (Idempotent)

- [x] **(AC: 1)** Create the `MediaDisplay.tsx` component file.
- [x] **(AC: 2, 4)** Implement the conditional rendering logic based on `dish.reel`.
- [x] **(AC: 2, 3)** Implement the `<video>` element with correct attributes.
- [x] **(AC: 4, 5)** Implement the `<img>` element and apply styling for proper scaling.
- [x] **Integration:** Integrate the `MediaDisplay` component into the `ReelView`.
- [x] **Test (Integration):** Write and pass all tests to verify conditional rendering and attribute correctness.
- [x] **Finalize:** Mark the story as complete.

### Dev Agent Record

**Completion Notes:**

*   **Implementation:** Created the `MediaDisplay` component in `apps/client/src/components/features/reel/media-display.tsx`.
*   **Functionality:** The component correctly renders a `<video>` element if the `dish` prop contains a `reel` URL, and falls back to an `<img>` element if it does not. The video element includes the `autoPlay`, `loop`, `muted`, and `playsInline` attributes for a seamless viewing experience, and it correctly uses the `dish.image` URL for its `poster` attribute.
*   **Integration:** The `MediaDisplay` has been successfully integrated into the `ReelView` component, replacing the previous placeholder content. Each vertical slide in the reel now shows the appropriate media for the dish.
*   **Testing:** Developed a test suite in `src/__tests__/components/features/reel/media-display.test.tsx` that validates all acceptance criteria, including the conditional rendering of image vs. video and the correctness of element attributes. All tests are passing.

**File List:**

*   `apps/client/src/components/features/reel/media-display.tsx` (created)
*   `apps/client/src/components/features/reel/reel-view.tsx` (modified)
*   `docs/qa/assessments/2.2-test-media-display.md` (created)
*   `apps/client/src/__tests__/components/features/reel/media-display.test.tsx` (created)
*   `docs/stories/2.2.story.md` (modified)

**Change Log:**

*   feat(2.2): create media display component for reel view
*   test(2.2): add tests for media display component
