---
epic: 3
story: 4
title: "Integrated QR Code Modal"
status: "Draft"
---

### Story Statement

As a vendor, I want to easily access and share my menu's QR code directly from my profile page, so I can quickly show it to customers or download it for printing.

### Acceptance Criteria

1.  A QR code icon-button is added to the `BrandHeader` UI (from Story 1.3).
2.  Clicking this button opens a centered modal overlay.
3.  The modal displays a large, high-resolution QR code for the vendor's menu URL.
4.  Below the QR code, a row of buttons provides "Copy Link", "Share" (using native device sharing), and "Download PNG" functionality.
5.  The modal is fully responsive and can be dismissed easily.

### Dev Notes

#### Technical Specifications

*   **QR Code Generation:** A client-side QR code generation library is required. `qrcode.react` is a good choice.
*   **Components:**
    *   The `BrandHeader` will be modified to include the new QR code button.
    *   A new `QRCodeModal` component will be created using `shadcn-ui`'s `Dialog` as a base.
*   **Functionality:**
    *   **Copy Link:** Use the `navigator.clipboard` API.
    *   **Share:** Use the `navigator.share` API.
    *   **Download PNG:** This will require getting a reference to the QR code canvas element and converting it to a data URL to trigger a download.

#### File Locations

*   This story will modify:
    *   `apps/client/src/components/shared/BrandHeader.tsx`
*   This story will create a new component:
    *   `apps/client/src/components/shared/QRCodeModal.tsx` (inferred)

### Tasks / Subtasks

1.  **Dependency:** Add the `qrcode.react` library to the project.
2.  **(AC: 1)** In `BrandHeader.tsx`, add a new icon-button for the QR code.
3.  **(AC: 2)** Create the `QRCodeModal.tsx` component. Use `shadcn-ui`'s `Dialog` for the modal structure.
4.  **(AC: 2)** The `onClick` handler for the QR code button in the header should open this modal.
5.  **(AC: 3)** Inside the modal, use the `qrcode.react` component to render the QR code for the current page's URL.
6.  **(AC: 4)** Implement the three action buttons:
    *   "Copy Link": Get the current URL and use `navigator.clipboard.writeText()`.
    *   "Share": Use `navigator.share()` with the current URL.
    *   "Download PNG": Get a ref to the canvas element from `qrcode.react`, convert it to a PNG data URL, create a temporary link element, and simulate a click to trigger the download.
7.  **(AC: 5)** Ensure the modal is responsive and can be dismissed.
8.  **Test (Integration):** Write tests to verify:
    *   Clicking the button in the header opens the modal.
    *   The QR code is rendered.
    *   The action buttons are present.
