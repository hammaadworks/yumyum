---
epic: 2
story: 7
title: "Cart Summary UI"
status: "Draft"
---

### Story Statement

As a user, after adding items to my cart, I want to be able to view my full order, adjust quantities, and see the total price in a clear summary.

### Acceptance Criteria

1.  Tapping the `GlobalCart` button opens a bottom sheet drawer with an animation.
2.  The drawer is scrollable to handle long lists of items.
3.  The drawer's height is adaptive and can expand to fill the full screen if necessary.
4.  The drawer can be closed by swiping down or tapping an 'X' icon.
5.  Each item in the list displays the dish name, its price, and +/- controls to adjust the quantity.
6.  The total price for each item (quantity x price) is displayed.
7.  A final "Total Order Price" for all items in the cart is displayed prominently.

### Dev Notes

#### Technical Specifications

*   **Component:** `CartSummary`. This component will be built using `shadcn-ui`'s `Drawer` component as a base. [Source: `docs/architecture.md#Section-6`]
*   **State Management:** The component will subscribe to the `useCartStore` to get the list of `items`. It will also use actions from the store like `updateItemQuantity` when the user interacts with the +/- controls. [Source: `docs/ui-architecture.md#Section-5`]
*   **Calculations:** The component will be responsible for calculating the total price for each line item and the final total for the order. This logic can be encapsulated in selectors within the Zustand store for reusability and performance.

#### File Locations

*   **Component:** `apps/client/src/components/features/cart/CartSummary.tsx` (inferred)
*   **State Store:** `apps/client/src/store/use-cart.store.ts`

### Tasks / Subtasks

1.  **(AC: 1)** Create the `CartSummary.tsx` component file.
2.  **(AC: 1)** Modify the `GlobalCart` button's `onClick` handler to open the `CartSummary` drawer.
3.  **State:** In `use-cart.store.ts`, add selectors to calculate the total price of the cart (`useCartTotal`).
4.  **(AC: 5, 6, 7)** Inside `CartSummary`, subscribe to the `useCartStore` to get the `items` array. Map over the items to render a list, displaying the name, price, and quantity for each.
5.  **(AC: 5)** For each item, add `+` and `-` buttons. Wire their `onClick` handlers to the `updateItemQuantity` action in the cart store.
6.  **(AC: 7)** Display the total order price using the selector from the cart store.
7.  **(AC: 2, 3)** Ensure the drawer content is scrollable and the drawer itself is adaptive.
8.  **(AC: 4)** Ensure the drawer can be closed via swipe or a dedicated close button.
9.  **Test (Integration):** Write tests to verify:
    *   The drawer opens with the correct items from the cart store.
    *   Clicking `+` or `-` correctly calls the `updateItemQuantity` action.
    *   The total price display updates when the cart changes.
