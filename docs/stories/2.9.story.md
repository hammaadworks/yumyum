---
epic: 2
story: 9
title: "Checkout CTAs"
status: "Draft"
---

### Story Statement

As a user, once I am happy with my order in the cart summary, I want clear buttons to place my order, pay, or leave feedback.

### Acceptance Criteria

1.  A prominent, solid, filled-style button for the primary action, "Place Order on WhatsApp," is displayed.
2.  Two secondary, outline-style buttons, "UPI Pay" and "Leave a rating," are displayed below the primary button.
3.  Clicking "Place Order on WhatsApp" opens WhatsApp with a pre-formatted message of the final order.
4.  Clicking "UPI Pay" opens the payment link specified in the vendor's `brand` data (`payment_link`).
5.  Clicking "Leave a rating" initiates the "Smart Feedback" funnel (to be built in Epic 3).

### Dev Notes

#### Technical Specifications

*   **Component:** These buttons will be located at the bottom of the `CartSummary` drawer.
*   **Styling:** Use `shadcn-ui`'s `Button` component. The primary button will use the default style, and the secondary buttons will use the `variant="outline"` style to create the visual hierarchy.
*   **WhatsApp Integration:** The pre-formatted message should be a clear, readable summary of the cart contents. The URL should be constructed as `https://wa.me/{brand.whatsapp}?text={encoded_message}`. [Source: `docs/architecture.md#Section-7`]
*   **Data:** The component will need access to the `brand` data (for the WhatsApp number and payment link) and the `cart` data (for the order message).

#### File Locations

*   This story will modify:
    *   `apps/client/src/components/features/cart/CartSummary.tsx`

### Tasks / Subtasks

1.  **(AC: 1, 2)** In `CartSummary.tsx`, add the three `Button` components at the bottom of the drawer, styled according to the visual hierarchy.
2.  **(AC: 3)** Create a utility function that takes the cart items and formats them into a string for the WhatsApp message.
3.  **(AC: 3)** Implement the `onClick` handler for the "Place Order" button. It should get the formatted message, URL-encode it, and then programmatically open the `whatsapp://` link.
4.  **(AC: 4)** Implement the `onClick` handler for the "UPI Pay" button. It should read the `payment_link` from the `brand` data and open it in a new tab.
5.  **(AC: 5)** Add a placeholder `onClick` handler for the "Leave a rating" button. The feedback funnel logic will be implemented in Epic 3.
6.  **Test (Integration):** Write tests to verify:
    *   Clicking "Place Order" attempts to open a correctly formatted WhatsApp URL.
    *   Clicking "UPI Pay" attempts to open the correct payment link.
