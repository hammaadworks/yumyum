---
epic: 1
story: 6
title: "Test Design: Dish Grid View"
---

### 1. Introduction

This document outlines the test plan for **Story 1.6: Dish Grid View**. The primary goal is to ensure the `DishGrid` component correctly filters and sorts a list of dishes based on global state from a Zustand store and renders the results as a grid of `DishCard` components.

### 2. Test Objectives

*   **Verify Filtering:** Ensure the `DishGrid` correctly filters the list of dishes based on the `vegOnly` state from the `useFilterStore`.
*   **Verify Sorting:** Confirm that the grid correctly sorts the dishes by price (ascending and descending) based on the `sortBy` state.
*   **Assess Rendering:** Check that the correct number of `DishCard` components are rendered in the correct order after filtering and sorting.
*   **Test `DishCard`:**
  *   Verify that the `DishCard` renders the dish image correctly.
  *   Confirm that the pulsing dot indicator is displayed if and only if the dish has a special `tag`.
  *   Ensure the `onClick` handler is called with the correct dish when the card is clicked.

### 3. Test Scope

*   **In Scope:**
  *   Integration tests for the `DishGrid` component and its interaction with the `useFilterStore`.
  *   Unit tests for the `DishCard` component.
  *   Mocking the Zustand store to control the filter/sort state for tests.
*   **Out of Scope:**
  *   The visual implementation of the responsive grid layout.
  *   The implementation of the "Reel View" triggered on click.

### 4. Test Cases

#### 4.1. `DishGrid` Component

| Test Case ID | Description | Steps | Expected Result |
| :--- | :--- | :--- | :--- |
| **1.6-G-01** | **Default Render:** Render with a list of dishes and default filter state. | 1. Provide a mock `Dish[]` array. <br> 2. Render the `DishGrid`. | All dishes should be rendered, sorted by price in ascending order. |
| **1.6-G-02** | **Filter by "Veg Only":** The user enables the "Veg Only" filter. | 1. Render the `DishGrid`. <br> 2. Set `vegOnly: true` in the mock `useFilterStore`. | Only dishes with `veg: 'veg'` should be rendered. |
| **1.6-G-03** | **Sort by Price (Descending):** The user changes the sort order. | 1. Render the `DishGrid`. <br> 2. Set `sortBy: 'desc'` in the mock `useFilterStore`. | The rendered dishes should be sorted by price in descending order. |
| **1.6-G-04** | **Combined Filter and Sort:** The user applies both a filter and a sort. | 1. Render the `DishGrid`. <br> 2. Set `vegOnly: true` and `sortBy: 'desc'` in the store. | Only veg dishes should be rendered, and they should be sorted by price from high to low. |
| **1.6-G-05** | **Empty Dish List:** Render the component with an empty `dishes` array. | 1. Render `DishGrid` with `dishes={[]}`. | The component should render an empty container and not throw any errors. |

#### 4.2. `DishCard` Component

| Test Case ID | Description | Steps | Expected Result |
| :--- | :--- | :--- | :--- |
| **1.6-C-01** | **Render with No Tag:** Render a card for a dish with no special tag. | 1. Create a dish with `tag: 'normal'` or no tag. <br> 2. Render the `DishCard`. | The dish image should be visible, but the pulsing dot indicator should **not** be present in the DOM. |
| **1.6-C-02** | **Render with Special Tag:** Render a card for a dish with a special tag. | 1. Create a dish with `tag: 'bestseller'`. <br> 2. Render the `DishCard`. | The pulsing dot indicator element should be present in the DOM. |
| **1.6-C-03** | **Click Handler:** The user clicks on a `DishCard`. | 1. Create a mock `onSelect` function. <br> 2. Render the `DishCard` with the mock function as a prop. <br> 3. Simulate a click on the card. | The `onSelect` function should be called once with the corresponding `Dish` object as an argument. |