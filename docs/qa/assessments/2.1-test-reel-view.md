---
epic: 2
story: 1
title: "Test Design: Reel View Foundation & UI"
---

### 1. Introduction

This document outlines the test plan for **Story 2.1: Reel View Foundation & UI**. The goal is to verify that the `ReelView` component renders correctly as a full-screen overlay, can be toggled by a global state, and correctly sorts dishes based on their `instock` status.

### 2. Test Objectives

*   **Verify Conditional Rendering:** Ensure the `ReelView` is only rendered when its visibility state is set to `true` in the `useUIStore`.
*   **Validate Data Logic:** Confirm that the component correctly sorts the incoming `dishes` array, moving any items with `instock: 'no'` to the end of the list.
*   **Assess UI Elements:** Check for the presence of key UI elements, such as the close button and the `GlobalCart`.
*   **Test Dismissal:** Verify that clicking the close button correctly updates the global state to hide the view.

### 3. Test Scope

*   **In Scope:**
    *   Integration tests for the `ReelView` component and its interaction with the `useUIStore`.
    *   Testing the sorting logic for `instock` status.
    *   Mocking the Zustand store to control the view's visibility.
*   **Out of Scope:**
    *   The visual "glassmorphic" effect.
    *   The detailed content of each dish rendered in the vertical list.
    *   The `GlobalCart`'s internal functionality (which is tested separately).

### 4. Test Cases

| Test Case ID | Description | Steps | Expected Result |
| :--- | :--- | :--- | :--- |
| **2.1-R-01** | **Hidden by Default:** The `ReelView` should not be visible on initial render. | 1. Ensure the `useUIStore` `isReelViewOpen` state is `false`. <br> 2. Render the parent component containing the `ReelView`. | The `ReelView` component should not be present in the DOM. |
| **2.1-R-02** | **Visible on State Change:** The `ReelView` appears when the global state is updated. | 1. Set `isReelViewOpen: true` in the `useUIStore`. <br> 2. Render the parent component. | The `ReelView` component should be present in the DOM. |
| **2.1-L-01** | **Dish Sorting (`instock: 'no'`):** Render the view with a mix of in-stock and out-of-stock dishes. | 1. Provide a mock `Dish[]` array where an in-stock item appears after an out-of-stock item. <br> 2. Render the `ReelView`. <br> 3. Inspect the order of the rendered dish elements. | The dish with `instock: 'no'` should be rendered last, after all `instock: 'yes'` items. |
| **2.1-C-01** | **Dismiss via Close Button:** The user clicks the close button. | 1. Set `isReelViewOpen: true` to make the view visible. <br> 2. Render the component. <br> 3. Simulate a click on the close button. | The `closeReelView` action in the `useUIStore` should be called, and the component should no longer be visible. |
| **2.1-R-03** | **Global Cart Visibility:** Ensure the `GlobalCart` is rendered within the `ReelView`. | 1. Set `isReelViewOpen: true` and render the `ReelView`. <br> 2. Query for the `GlobalCart` component (e.g., by a test ID or role). | The `GlobalCart` component should be present in the DOM. |