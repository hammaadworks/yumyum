---
epic: 1
story: 7
title: "Test Design: Global Cart Button"
---

### 1. Introduction

This document outlines the test plan for **Story 1.7: Global Cart Button**. The goal is to verify that the `GlobalCart` component correctly displays the number of items in the cart and responds to changes in the global `useCartStore`.

### 2. Test Objectives

*   **Verify Rendering:** Ensure the `GlobalCart` component renders the cart icon.
*   **Assess State Reactivity:** Confirm that the component's badge correctly reflects the state of the `useCartStore`.
    *   The badge should be hidden when the cart is empty.
    *   The badge should display the correct number of items when the cart is not empty.
*   **Test Click Handling:** Verify that clicking the cart button triggers the appropriate callback function.

### 3. Test Scope

*   **In Scope:**
    *   Integration tests for the `GlobalCart` component and its interaction with the `useCartStore`.
    *   Mocking the Zustand store to control the cart state for tests.
*   **Out of Scope:**
    *   The visual styling of the component.
    *   The implementation of the "Cart Summary" drawer that is opened on click.

### 4. Test Cases

| Test Case ID | Description | Steps | Expected Result |
| :--- | :--- | :--- | :--- |
| **1.7-R-01** | **Render with Empty Cart:** Render the `GlobalCart` component with an empty cart store. | 1. Ensure the `useCartStore` is in its initial (empty) state. <br> 2. Render the `GlobalCart` component. | 1. The cart icon should be visible. <br> 2. The notification badge should **not** be present in the DOM. |
| **1.7-S-01** | **Badge Appears on Item Add:** An item is added to the cart store. | 1. Render the `GlobalCart` component. <br> 2. Programmatically add an item to the mock `useCartStore`. | 1. The badge should appear. <br> 2. The badge should display the text "1". |
| **1.7-S-02** | **Badge Updates on Multiple Items:** Multiple items are added to the cart store. | 1. Render the `GlobalCart` component. <br> 2. Add three items to the mock `useCartStore`. | The badge should display the text "3". |
| **1.7-S-03** | **Badge Disappears on Cart Clear:** The cart is cleared. | 1. Add items to the store so the badge is visible. <br> 2. Render the component. <br> 3. Programmatically clear the mock `useCartStore`. | The badge should no longer be present in the DOM. |
| **1.7-C-01** | **Click Handler:** The user clicks on the cart button. | 1. Create a mock `onClick` function. <br> 2. Render the component with the mock function as a prop. <br> 3. Simulate a click on the cart button. | The mock `onClick` function should be called once. |