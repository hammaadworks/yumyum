---
epic: 2
story: 5
title: "Test Design: Core Ordering Interaction"
---

### 1. Introduction

This document outlines the test plan for **Story 2.5: Core Ordering Interaction**. The purpose is to verify that users can add and remove items from the cart via interactions within the `ReelView`, specifically by double-tapping the `MediaDisplay` and using a new "Add to Cart" button in the `ReelActionBar`.

### 2. Test Objectives

*   **Verify Add to Cart (Double-Tap):** Ensure that double-tapping the `MediaDisplay` component adds the corresponding dish to the `useCartStore`.
*   **Verify Add/Remove to Cart (Button):**
    *   Confirm that clicking the "Add to Cart" button in the `ReelActionBar` adds the item if it's not already in the cart.
    *   Confirm that clicking the button *removes* the item if it is already in the cart.
*   **Assess State Reactivity:** Check that the `GlobalCart` badge count updates correctly in response to these actions.
*   **Test UI Feedback:**
    *   Verify that the "Add to Cart" button's visual state (e.g., text or icon) changes to reflect whether the item is in the cart.
    *   Verify that the confirmation animation on the `MediaDisplay` is triggered after a double-tap.

### 3. Test Scope

*   **In Scope:**
    *   Integration tests for `MediaDisplay` and `ReelActionBar` focusing on their interaction with `useCartStore`.
    *   Mocking the `useCartStore` to control and verify its state.
*   **Out of Scope:**
    *   The precise visual implementation of the micro-animations.

### 4. Test Cases

| Test Case ID | Description | Steps | Expected Result |
| :--- | :--- | :--- | :--- |
| **2.5-I-01** | **Double-Tap to Add:** The user double-taps the `MediaDisplay`. | 1. Render `MediaDisplay` with a mock dish. <br> 2. Simulate a `doubleClick` event on the component. | 1. The `addItem` action on `useCartStore` should be called once with the mock dish. <br> 2. The confirmation animation element should be present in the DOM temporarily. |
| **2.5-B-01** | **Add to Cart via Button:** The cart is empty, and the user clicks the "Add to Cart" button. | 1. Render `ReelActionBar` with a mock dish. <br> 2. Simulate a click on the "Add to Cart" button. | The `addItem` action on `useCartStore` should be called once. |
| **2.5-B-02** | **Remove from Cart via Button:** The item is in the cart, and the user clicks the button again. | 1. Add an item to the cart store. <br> 2. Render `ReelActionBar` for that dish. <br> 3. Simulate a click on the button. | The `removeItem` action on `useCartStore` should be called once with the dish's ID. |
| **2.5-S-01** | **Button State (Not in Cart):** Render the action bar for a dish not in the cart. | 1. Render `ReelActionBar`. | The button should have a visual state indicating "Add" (e.g., a plus icon or "Add to Cart" text). |
| **2.5-S-02** | **Button State (In Cart):** Render the action bar for a dish that is in the cart. | 1. Add the dish to the cart store. <br> 2. Render `ReelActionBar`. | The button should have a visual state indicating "Remove" or "Added" (e.g., a checkmark icon). |
| **2.5-S-03** | **Global Cart Badge Update:** Add an item to the cart. | 1. Render a component that includes the `GlobalCart`. <br> 2. Simulate an action that adds an item to the cart (e.g., click the "Add" button). | The `GlobalCart`'s badge should update to show "1". |