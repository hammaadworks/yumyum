# Test Design: Story 2.4: Create Protected Dashboard Route & Logout

Date: 2025-10-28
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 8
- Unit tests: 1 (12.5%)
- Integration tests: 3 (37.5%)
- E2E tests: 4 (50%)
- Priority distribution: P0: 5, P1: 3

## Test Scenarios by Acceptance Criteria

### AC1: A new route is created at `/vendor/dashboard`.

| ID            | Level | Priority | Test                                                                    | Justification                                    |
| ------------- | ----- | -------- | ----------------------------------------------------------------------- | ------------------------------------------------ |
| 2.4-E2E-001   | E2E   | P0       | Authenticated user navigates to `/vendor/dashboard` and sees content.   | Critical user journey, positive path.            |
| 2.4-E2E-002   | E2E   | P0       | Unauthenticated user navigates to `/vendor/dashboard` and redirects to `/login`. | Critical security check, mitigates SEC-001.      |

### AC2: Unauthenticated users are redirected to `/login`.

| ID            | Level       | Priority | Test                                                                    | Justification                                    |
| ------------- | ----------- | -------- | ----------------------------------------------------------------------- | ------------------------------------------------ |
| 2.4-INT-001   | Integration | P0       | Protected layout/middleware redirects unauthenticated users to `/login`. | Core security logic, mitigates SEC-001, TECH-001. |
| 2.4-INT-002   | Integration | P1       | Protected layout/middleware allows authenticated users access.          | Ensures correct behavior for authorized users.   |
| 2.4-E2E-003   | E2E         | P0       | Direct access to `/vendor/dashboard` as unauthenticated redirects to `/login`. | End-to-end validation of protection.             |

### AC3: A "Logout" button is available and functional.

| ID            | Level       | Priority | Test                                                                    | Justification                                    |
| ------------- | ----------- | -------- | ----------------------------------------------------------------------- | ------------------------------------------------ |
| 2.4-UNIT-001  | Unit        | P1       | Test the `signOut` function of the authentication service.              | Isolates core logout logic, mitigates TECH-002.  |
| 2.4-E2E-004   | E2E         | P0       | Logged-in user clicks logout, redirects to `/login`, and session is invalid. | Critical user journey, security, mitigates TECH-002, BUS-001. |
| 2.4-INT-003   | Integration | P1       | After logout, attempting to access `/vendor/dashboard` redirects to `/login`. | Verifies session invalidation.                   |

## Risk Coverage

- **SEC-001 (Unauthorized Access to Dashboard):** Covered by `2.4-E2E-002`, `2.4-INT-001`, `2.4-E2E-003`.
- **TECH-001 (Incorrect Redirection Loop):** Covered by `2.4-INT-001`, `2.4-E2E-003`.
- **SEC-002 (Session Hijacking/Fixation):** Covered by `2.4-E2E-004`.
- **TECH-002 (Logout Failure):** Covered by `2.4-UNIT-001`, `2.4-E2E-004`, `2.4-INT-003`.
- **BUS-001 (Poor User Experience on Logout):** Covered by `2.4-E2E-004`.

## Recommended Execution Order

1.  P0 Unit and Integration tests.
2.  P0 E2E tests.
3.  P1 tests.
