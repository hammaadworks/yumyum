---
epic: 1
story: 5
title: "Test Design: Controls Bar"
---

### 1. Introduction

This document outlines the test plan for **Story 1.5: Controls Bar**. The objective is to verify that the `ControlsBar` component renders correctly and that its interactive elements (a "Veg Only" switch and a "Sort by Price" button) are properly connected to a global Zustand state store.

### 2. Test Objectives

*   **Verify Rendering:** Ensure the `ControlsBar` displays all its required child components: the "Veg Only" switch with its label, the sort button, and the search input.
*   **Assess State Integration:** Confirm that interacting with the controls correctly updates the corresponding values in the global `useFilterStore`.
*   **Test State Reactivity:** Verify that the component's UI correctly reflects the initial and updated states from the Zustand store.

### 3. Test Scope

*   **In Scope:**
    *   Integration tests for the `ControlsBar` component and its interaction with the `useFilterStore`.
    *   Mocking the Zustand store to isolate the component and verify state changes.
*   **Out of Scope:**
    *   The visual styling of the components.
    *   The implementation of the search logic.
    *   Any other components that might consume the state from `useFilterStore`.

### 4. Test Cases

| Test Case ID | Description | Steps | Expected Result |
| :--- | :--- | :--- | :--- |
| **1.5-R-01** | **Initial Rendering:** Render the `ControlsBar` component. | 1. Render the component. | 1. A switch with the label "Veg Only" is visible. <br> 2. A button with text indicating the sort order (e.g., "Sort by Price: Low to High") is visible. <br> 3. A search input field is visible. |
| **1.5-S-01** | **Toggle "Veg Only" Switch:** The user clicks the "Veg Only" switch. | 1. Render the component. <br> 2. Simulate a click on the switch. | 1. The `vegOnly` property in the `useFilterStore` should be updated from `false` to `true`. |
| **1.5-S-02** | **Click "Sort by Price" Button:** The user clicks the sort button. | 1. Render the component. <br> 2. Simulate a click on the sort button. | 1. The `sortBy` property in the `useFilterStore` should toggle from `'asc'` to `'desc'`. |
| **1.5-S-03** | **Click Sort Button Twice:** The user clicks the sort button twice. | 1. Render the component. <br> 2. Simulate two clicks on the sort button. | 1. The `sortBy` property should toggle to `'desc'` on the first click, and then back to `'asc'` on the second. |
| **1.5-R-02** | **Component Reflects Store State:** The store is initialized with non-default values. | 1. Manually set the `useFilterStore` state to `vegOnly: true` and `sortBy: 'desc'`. <br> 2. Render the `ControlsBar`. | 1. The "Veg Only" switch should be in the "on" (checked) state. <br> 2. The sort button text should indicate the current sort order is "High to Low". |