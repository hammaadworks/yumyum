# Test Design: Story 2.6 - Infinite Loop & State Sync

Date: 2025-10-12
Designer: Winston (Architect)

## Test Strategy Overview

The test strategy for the infinite scroll and state synchronization is twofold. Unit tests will cover the core logic of determining the "next" dish/category, especially the wrap-around and boundary-crossing logic. Integration tests will then verify that as the user scrolls (simulated via events), the `ReelCategoryNavigator` component receives the correct props and updates its display accordingly.

- Total test scenarios: 6
- Unit tests: 3 (50%)
- Integration tests: 3 (50%)
- E2E tests: 0 (0%)
- Priority distribution: P0: 4, P1: 2, P2: 0, P3: 0

## Test Scenarios by Acceptance Criteria

### AC1: Category Boundary Crossing

| ID           | Level | Priority | Test                                                                 | Justification                                                              |
| ------------ | ----- | -------- | -------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| 2.6-UNIT-001 | Unit  | P0       | When the last dish of a category is passed, the next dish is the first of the next category. | Pure logic test for the primary category transition behavior.              |

### AC2: Infinite Loop

| ID           | Level | Priority | Test                                                                 | Justification                                                              |
| ------------ | ----- | -------- | -------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| 2.6-UNIT-002 | Unit  | P0       | When the last dish of the final category is passed, the next dish is the first of the first category. | Pure logic test for the critical "infinite loop" requirement.              |
| 2.6-UNIT-003 | Unit  | P1       | The logic handles a list containing only one category.               | Edge case validation for the loop logic.                                   |

### AC3 & AC4: State Synchronization

| ID           | Level       | Priority | Test                                                                 | Justification                                                              |
| ------------ | ----------- | -------- | -------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| 2.6-INT-001  | Integration | P0       | As the user scrolls, the active category in the `ReelCategoryNavigator` updates. | Critical test to ensure the UI state is synchronized between components.   |
| 2.6-INT-002  | Integration | P0       | The scroll position of the `ReelCategoryNavigator` updates to keep the active category centered. | Verifies the visual state of the navigator stays in sync with the data state. |
| 2.6-INT-003  | Integration | P1       | The initial category displayed in the navigator matches the first dish shown. | Verifies the correct initial state of the synchronized components.         |

## Recommended Execution Order

1.  P0 Unit tests
2.  P0 Integration tests
3.  P1 Unit tests
4.  P1 Integration tests
